<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINIMARKET KAMI</title>
    <link rel="stylesheet" href="style.css">
</head>
    

<body>

<div class="container">
    <h1><marquee>SELAMAT DATANG DI MINIMARKET KAMI</marquee></h1>

    <div id="product-section">
       <center> <h2>DAFTAR PRODUK</h2></center>
        <div id="products" class="product-container"></div>
    </div>

    <div id="cart">
        <h2>Keranjang Belanja</h2>
        <ul id="cart-items"></ul>
        <p>Total: Rp <span id="total-price">0</span></p>
        <button id="checkout-btn">Checkout</button>
    </div>
</div>

<script>
    // Daftar produk
    const products = [
        { id: 1, name: 'AQUA', price: 20000, img: 'img/aqua.jpeg' },
        { id: 2, name: 'ICEE', price: 10000, img: 'img/icee.jpeg' },
        { id: 3, name: 'NUTRI BOOST', price: 11000, img: 'img/nutri boost.jpeg' },
        { id: 4, name: 'ROTI', price: 10000, img: 'img/roti.jpeg' },
        { id: 5, name: 'BETER', price: 10000, img: 'img/beter.jpeg' },
    ];

    let cart = [];

    function displayProducts() {
        const productsContainer = document.getElementById('products');
        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.classList.add('product');
            productCard.innerHTML = `
                <img src="${product.img}" alt="${product.name}" width="150">
                <h3>${product.name}</h3>
                <p>Rp ${product.price.toLocaleString()}</p>
                <button onclick="addToCart(${product.id})">Tambah ke keranjang</button>
            `;
            productsContainer.appendChild(productCard);
        });
    }

    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        const cartItem = cart.find(item => item.id === productId);

        if (cartItem) {
            cartItem.quantity += 1;
        } else {
            cart.push({ ...product, quantity: 1 });
        }

        updateCart();
    }

    function updateCart() {
        const cartItemsContainer = document.getElementById('cart-items');
        cartItemsContainer.innerHTML = '';

        let totalPrice = 0;
        cart.forEach(item => {
            const li = document.createElement('li');
            li.textContent = `${item.name} x ${item.quantity} - Rp ${(item.price * item.quantity).toLocaleString()}`;
            cartItemsContainer.appendChild(li);
            totalPrice += item.price * item.quantity;
        });

        document.getElementById('total-price').textContent = totalPrice.toLocaleString();
    }

    function checkout() {
        if (cart.length === 0) {
            alert('Keranjang kosong.');
            return;
        }

        const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        const payment = prompt(`Total belanja Anda Rp ${total.toLocaleString()}. Masukkan jumlah uang:`);

        if (payment === null) return;

        const paymentInt = parseInt(payment);
        if (paymentInt >= total) {
            alert(`Pembayaran berhasil! Kembalian Anda: Rp ${(paymentInt - total).toLocaleString()}`);
            cart = [];
            updateCart();
        } else {
            alert('Uang Anda tidak mencukupi.');
        }
    }

    document.getElementById('checkout-btn').addEventListener('click', checkout);

    // Tampilkan produk saat halaman dimuat
    displayProducts();
</script>

</body>
</html>
